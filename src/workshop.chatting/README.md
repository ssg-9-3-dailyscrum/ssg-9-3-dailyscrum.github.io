# 자바 소켓기반 채팅 프로그램

# 1. 배경 (Background)

동아리/수업에서 사용할 **경량 텍스트 채팅** 도구가 필요합니다.
설치가 쉬워야 하고(자바 표준 라이브러리만), 같은 네트워크에서 여러 사용자가 동시에 대화할 수 있어야 합니다.

# 2. 목표 (Goals)

- **TCP 소켓**을 이용해 서버 1대 · 다수 클라이언트 구조 구현
- **닉네임**을 사용한 대화, **입장/퇴장 안내** 메시지
- 서버/클라이언트의 **정상 종료** 처리
- 기본 **예외 처리**(연결 끊김, 잘못된 입력 처리)

# 3. 범위 (Scope)

## 3.1 필수 기능 (Must)

1. **서버 시작/종료**
    - 지정 포트로 listen (기본 5000)
    - Ctrl+C, 예외 발생 시 소켓·스레드 정리 후 종료
2. **멀티 클라이언트 처리**
    - 각 클라이언트를 스레드(또는 스레드풀)로 처리
    - 브로드캐스트: 한 사용자의 메시지를 모든 사용자에게 전달
3. **닉네임 등록**
    - 접속 후 첫 메시지: `NICK <이름>`
    - 공백/중복 닉네임 거절(에러 안내 후 연결 종료 가능)
4. **입장/퇴장 알림**
    - 예: `Alice joined` / `Bob left`
5. **기본 명령**
    - `/quit` : 클라이언트 종료
    - `/who` : 현재 접속자 목록 출력
6. **문자 인코딩 UTF-8**
    - 한글 입출력 정상 동작

# 4. 비기능 요구사항 (NFR)

- **표준 라이브러리만** 사용(java.net, java.io 등) — 외부 프레임워크 금지
- **콘솔 기반**(텍스트 UI)
- **안정성**: 한 클라이언트 문제로 서버 전체가 종료되면 안 됨
- **가독성/주석**: 처음 보는 사람도 흐름을 따라갈 수 있게 설명

# 5. 사용자 스토리 (User Stories)

- 학생 A로서, 프로그램을 실행하여 **닉네임**을 정하고, 다른 사용자와 **대화**하고 싶다.
- 학생 B로서, `/who`로 현재 **접속자 목록**을 보고 싶다.
- 학생 C로서, `/quit`으로 **깨끗하게 종료**하고 싶다.

# 6. 인터페이스/프로토콜

- **클라이언트 → 서버**
    - 최초 1회: `NICK <name>`
    - 일반 채팅: `<text>`
    - 명령: `/quit`, `/who`, (선택 `/w <nick> <text>`)
- **서버 → 클라이언트**
    - 시스템 메시지: `<text>`
    - 일반 메시지: `[닉네임] <text>`
    - 안내/오류: `OK ...`, `ERR ...` 형태 권장

# 7. 개발 가이드

- **단계 1**: 단일 클라이언트 에코 서버/클라이언트
- **단계 2**: 스레드로 다중 클라이언트 처리
- **단계 3**: 닉네임 관리(List/Set) + 브로드캐스트
- **단계 4**: 명령 처리(`/quit`, `/who`)

# 8. 빌드 & 실행 방법

```bash
# 컴파일
javac -d out src/ChatServer.java src/ChatClient.java

# 서버 실행 (기본 포트 5000)
java -cp out ChatServer 5000

# 클라이언트 실행
java -cp out ChatClient 127.0.0.1 5000 Yumi
java -cp out ChatClient 127.0.0.1 5000 ShinSaegae

```

# 9. 테스트 시나리오 &  I/O

## 9.1 기능 테스트

1. **닉네임 등록**
- 입력: (클라) `NICK Yumi`
- 기대: (서버 브로드캐스트)  `Yumi joined`
- 실패 케이스: `NICK`만 보내거나, 공백/중복 → `ERR ...`
1. **일반 채팅 브로드캐스트**
- Alice 입력: `안녕`
- 기대: 모든 클라 콘솔에 `[Yumi] 안녕` 출력
1. **/who**
- 입력: `/who`
- 기대: `USERS Yumi, ShinSaegae, ...`
1. **/quit**
- 입력: `/quit`
- 기대: 클라이언트 종료
1. **서버 강제 종료(Ctrl+C)**
- 기대: 서버 종료 메시지, 모든 소켓 정리(클라이어느 쪽 “Disconnected” )



## 구현


![alt text](/src/workshop.chatting/img/image1.png)


![alt text](/src/workshop.chatting/img/image2.png)


![alt text](/src/workshop.chatting/img/image3.png)

